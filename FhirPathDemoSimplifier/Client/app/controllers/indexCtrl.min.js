(function(){app.controller("IndexCtrl",function(n,t,i){var r,u;return r=null,require(["Client/app/vendor/fhirpath.js/bundle.js"],function(n){return r=n}),Common.showLoading($("#resoruceInputContainer")),u=t(i.BaseUrl),u.read({id:i.ResourceId,resourceType:i.ResourceType,success:function(t){return n.resource=JSON.stringify(t,null,4),n.update(),n.$apply("doMapping()"),Common.hideLoading($("#resoruceInputContainer"))},error:function(n){return Common.hideLoading($("#resoruceInputContainer")),console.log(n)}}),n.showReturnButton=function(){return i.CallbackUrl!==null},n.goBack=function(){return window.location=i.CallbackUrl},n.update=function(){var t,i,u;if(n.path===void 0||n.path==="")return n.successMessage="You can enter your FhirPath in the input field above.";if(n.resource===void 0||n.resource==="")return n.result=null,n.successMessage="You can enter your FhirPath expression below.";try{i=JSON.parse(n.resource);n.parseError=null}catch(f){t=f;n.parseError=t.toString();return}try{return u=r.evaluate(i,n.path),n.result=JSON.stringify(u,null,"  "),n.errors=null,n.error=null,n.successMessage="Your FhirPath compiles correctly."}catch(f){return t=f,t.errors?(n.successMessage=null,n.error=null,n.errors=t.errors,console.log("ERROR",t.errors)):(n.successMessage=null,n.errors=null,n.error=t.toString())}},n.codemirrorConfig={lineWrapping:!1,lineNumbers:!0,mode:"javascript",extraKeys:window.CodeMirror.normalizeKeyMap({"Ctrl-Space":function(){return n.$apply("doMapping()")},Tab:function(n){return n.replaceSelection("  ")}}),viewportMargin:Infinity}})}).call(this);