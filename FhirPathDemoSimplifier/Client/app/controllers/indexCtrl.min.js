(function(){app.controller("IndexCtrl",function(n,t,i,r){var e,f,u;return f=null,require(["Client/app/vendor/fhirpath.js/bundle.js"],function(n){return f=n}),n.resourceIdentityModel=r,n.isDemoMode=r===null,n.goBack=function(){return window.location=n.resourceIdentityModel.CallbackUrl},n.goToDemoMode=function(){var i;return u(),i=new Firebase("https://fhirpath.firebaseio.com/"),n.examples=t(i),n.path="Patient.name.given |  Patient.name.given",n.resource='{"resourceType": "Patient", "name": [{"given": ["John"]}]}',n.isDemoMode=!0},n.goToResource=function(){var t;return u(),t=i(r.BaseUrl),t.read({id:r.ResourceId,resourceType:r.ResourceType,success:function(t){return n.resource=JSON.stringify(t,null,4),n.$apply("doMapping()")},error:function(n){return console.log(n)}}),n.isDemoMode=!1},n.saveExample=function(){return n.saving="Saving...",e({path:n.path,name:n.exampleName,resource:n.resource},function(){return n.saving=null})},n.update=function(){var t,i,r;try{i=JSON.parse(n.resource);n.parseError=null}catch(u){t=u;n.parseError=t.toString();return}try{return r=f.evaluate(i,n.path),n.result=JSON.stringify(r,null,"  "),n.errors=null,n.error=null}catch(u){return t=u,t.errors?(n.errors=t.errors,console.log("ERROR",t.errors)):n.error=t.toString()}},n.selectExample=function(t){return n.resource=t.resource,n.path=t.path,n.exampleName=t.name,n.update()},n.codemirrorConfig={lineWrapping:!1,lineNumbers:!0,mode:"javascript",extraKeys:window.CodeMirror.normalizeKeyMap({"Ctrl-Space":function(){return n.$apply("doMapping()")},Tab:function(n){return n.replaceSelection("  ")}}),viewportMargin:Infinity},e=function(n,i){var r,u;if((n||n.name))return u=new Firebase("https://fhirpath.firebaseio.com/"+n.name),r=t(u),r.$loaded().then(function(){return console.log("loaded",r),r.path=n.path,r.name=n.name,r.resource=n.resource,r.$save().then(function(){return i()})})},u=function(){return n.path="",n.resource="",n.result="",n.errors=null},u(),n.isDemoMode?n.goToDemoMode():n.goToResource()})}).call(this);